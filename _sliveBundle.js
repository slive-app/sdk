var SLIVE;(()=>{var e={221:(e,o,t)=>{const n=t(915);e.exports=()=>n.sliveConfig},874:(e,o,t)=>{e.exports=e=>{const o=t(915);return o.localConfig?(o.localConfig.width=e.width,o.localConfig.height=e.height):o.localConfig=e,e.width&&(document.body.style.width=o.localConfig.width+"px"),e.height&&(document.body.style.height=o.localConfig.height+"px"),e}},986:(e,o,t)=>{const n=t(339),i=(t(150),t(915)),a=t(269),s={start:async()=>s.connect(!0),O:null,firstConfig:!0,BackendServerWasConnected:!1,connect:async function(e){if(e||s.BackendServerWasConnected){if(!i.gateway.dashboard.version)return console.error("[sliveApp] No Gateway Version specified"),void bodyInjector.error("No version specified. Exiting...");s.O=new WebSocket(`${i.gateway.dashboard.url}?version=${i.gateway.dashboard.version}&token=${i.sliveConfig.api.token}&origin=overlay`),s.O.onmessage=async function(e){switch("ERROR"!=(e=JSON.parse(e.data)).ID&&i.sdk.local&&console.log(e),e.ID){case"ERROR":console.error("[sliveApp] "+JSON.stringify(e));break;case"PB2AF_PING":s.O.send(JSON.stringify({ID:"AF2PB_PONG",DATA:{}}));break;case"PB2AF_AUTHORIZE_SUCCESS":s.BackendServerWasConnected=!0;break;case"PB2AF_CONFIG":console.info(`[sliveApp] [PB] Connection to Gateway v${i.gateway.dashboard.version} established`),s.O.send(JSON.stringify({ID:"OF2PB_CONTROLLER_UPDATE",DATA:{module:{id:i.localConfig.id,name:i.localConfig.name},controller:i.controller}}));break;case"PB2OF_CONTROLLER_EVENT":a(e.DATA)}},s.O.onerror=function(e){console.error("[sliveApp] "+JSON.stringify(e)),s.O.close()},s.O.onclose=async function(){console.error("[sliveApp] Gateway Connection closed"),await n.waitMs(5e3),s.connect(!1)}}}};e.exports=s},127:(e,o,t)=>{const n=t(339),i=t(150),a=t(915),s=t(524),r=(t(986),{start:async()=>r.connect(!0),O:null,firstConfig:!0,BackendServerWasConnected:!1,connect:async function(e){if(e||r.BackendServerWasConnected){if(!a.gateway.overlay.version)return console.error("[sliveApp] No Gateway Version specified"),void s.error("No version specified. Exiting...");r.O=new WebSocket(`${a.gateway.overlay.url}?version=${a.gateway.overlay.version}&token=${n.getUrlVars().token}`),r.O.onmessage=async function(e){switch("ERROR"!=(e=JSON.parse(e.data)).ID&&a.sdk.local&&console.log(e),e.ID){case"ERROR":console.error("[sliveApp] "+e);break;case"OB2OF_PING":r.O.send(JSON.stringify({ID:"OF2OB_PONG",DATA:{}}));break;case"OB2OF_AUTHORIZE_SUCCESS":r.BackendServerWasConnected=!0;break;case"OB2OF_CONFIG":if(a.sliveConfig=e.DATA,r.firstConfig){if(r.firstConfig=!1,i("ready",a.sliveConfig),a.sdk.mode.server)if(a.sliveConfig.overlay.selectedId)s.loadModule(a.sliveConfig.overlay.selectedId);else for(const e of a.sliveConfig.overlay.selectedIds)s.loadModule(e);console.info(`[sliveApp] [OB] Connection to Gateway v${a.gateway.overlay.version} established`),await n.waitMs(2e3),!a.localConfig&&a.sdk.mode.dev&&(alert("[SDK] You have not specified a config for your project. The connection is now closed."),r.BackendServerWasConnected=!1,r.O.close(),s.error("No config specified. Exiting..."))}break;case"OB2OF_EVENTSUB":i("event",e.DATA),i(e.DATA.subscription.type,e.DATA);break;case"OB2OF_CHAT":i("chat",e.DATA);break;case"OB2OF_TOOL_DATA":i("toolData",e.DATA);break;case"OB2OF_EVENT_DATA":i("eventData",e.DATA);break;case"OB2OF_DB_GET_RESPONSE":case"OB2OF_DB_SET_RESPONSE":a.db[e.DATA.nonce]=e.DATA;break;case"OB2OF_RELOAD":location.reload()}},r.O.onerror=function(e){console.error("[sliveApp] "+JSON.stringify(e)),r.O.close()},r.O.onclose=async function(){console.error("[sliveApp] Gateway Connection closed"),await n.waitMs(5e3),r.connect(!1)}}}});e.exports=r},285:(e,o,t)=>{const n=t(915),i=(t(339),t(986));e.exports=e=>{n.controller=e,i.O&&1==i.O.readyState&&i.O.send(JSON.stringify({ID:"OF2PB_CONTROLLER_UPDATE",DATA:{module:{id:n.localConfig.id,name:n.localConfig.name},controller:n.controller}}))}},269:(e,o,t)=>{const n=t(915);e.exports=e=>{if(!n.controller||e.module.id!=n.localConfig.id)return;let o;for(let t of n.controller)for(let n of t.items)if(n.id==e.interaction.id){o=n;break}o&&o.action(e.interaction)}},907:(e,o,t)=>{const n=t(915),i=(t(339),t(986));e.exports=(e,o)=>{let t=!1;for(let i of n.controller)for(let n of i.items)if(n.id==e){for(let e in o)n[e]=o[e];n.id=e,t=!0;break}i.O&&1==i.O.readyState&&t&&i.O.send(JSON.stringify({ID:"OF2PB_CONTROLLER_UPDATE",DATA:{module:{id:n.localConfig.id,name:n.localConfig.name},controller:n.controller}}))}},365:(e,o,t)=>{t(127),t(339);const n=t(915);e.exports=e=>new Promise((async(o,t)=>{const i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.sliveConfig.api.token}};fetch(`${n.sliveConfig.api.host}/me/database?id=${n.localConfig.id}&key=${e}`,i).then((e=>e.json())).then((e=>{o(e.data.value)})).catch((e=>t(e)))}))},499:(e,o,t)=>{const n=t(915);e.exports=(e,o)=>new Promise((async(t,i)=>{const a={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.sliveConfig.api.token},body:JSON.stringify({id:n.localConfig.id,key:e,value:o})};fetch(`${n.sliveConfig.api.host}/me/database`,a).then((e=>e.json())).then((e=>{t(e.data.value)})).catch((e=>i(e)))}))},62:(e,o,t)=>{const n=t(915);e.exports=()=>new Promise((async(e,o)=>{console.log("Getting Events"),console.log(n.sliveConfig);const t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.sliveConfig.api.token}};console.log(`${n.sliveConfig.api.host}/me/live/events?start=${n.sliveConfig.twitch.stream.uptime.startedAtUnix||(Date.now()-864e5).toString()}`),fetch(`${n.sliveConfig.api.host}/me/live/events?start=${n.sliveConfig.twitch.stream.uptime.startedAtUnix||(Date.now()-864e5).toString()}`,t).then((e=>e.json())).then((o=>{e(o.data)})).catch((e=>o(e)))}))},143:(e,o,t)=>{const n=t(915);e.exports=(e,o)=>new Promise((async(t,i)=>{const a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.sliveConfig.api.token}};let s="";e&&(s+="stats=true&"),o&&(s+=`user=${o}&`),fetch(`${n.sliveConfig.api.host}/me/live/stream?${s}`,a).then((e=>e.json())).then((e=>{t(e.data)})).catch((e=>i(e)))}))},469:(e,o,t)=>{const n=t(915);e.exports=e=>new Promise((async(o,t)=>{const i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.sliveConfig.api.token}};fetch(`${n.sliveConfig.api.host}/me/twitch/api?path=${e}`,i).then((e=>e.json())).then((e=>{o(e.data)})).catch((e=>t(e)))}))},524:(e,o,t)=>{const n=t(915),i=t(339),a=t(874);e.exports={set:()=>{document.body.style.width="500px",document.body.style.height="200px",document.body.style.transform="scale(1)",document.body.style.transformOrigin="0 0",document.body.style.overflow="hidden",document.body.style.position="absolute",document.body.style.top="0",document.body.style.left="0",document.body.style.opacity="0",document.body.style.transition="transform 0.49s cubic-bezier(.72,.01,.23,.99), opacity 0.49s cubic-bezier(.72,.01,.23,.99)",document.body.style.margin="0"},update:()=>{setInterval((()=>{if(n.sdk.mode.server)if(n.localConfig)for(let e of document.body.children){if("IFRAME"!=e.tagName)continue;let o={};e.contentWindow.document.body.offsetWidth>n.localConfig.width&&(o.width=e.contentWindow.document.body.offsetWidth),e.contentWindow.document.body.offsetHeight>n.localConfig.height&&(o.height=e.contentWindow.document.body.offsetHeight),(o.width||o.height)&&a(o)}else a({width:1920,height:1080});if(!n.localConfig)return;let e=null;if(n.localConfig.width>=n.localConfig.height)e=window.innerWidth/n.localConfig.width;else{if(!(n.localConfig.height>n.localConfig.width))return;e=window.innerHeight/n.localConfig.height}document.body.style.transform=`scale(${e.toString()})`}),500)},error:e=>{document.body.innerHTML=`<div style="position: absolute; top: 5%; left: 3%; width: 90%; color: #759aff; font-family: Arial; font-size: 30px; text-align: left;">${e}</div>`},show:()=>{document.body.style.opacity="1"},hide:()=>{document.body.style.opacity="0"},loadModule:async e=>{n.sdk.local&&(console.debug("[sliveApp] [SDK] Wating additional 2 Seconds to load Module"),await i.waitMs(2e3));let o=document.createElement("iframe");o.src=`https://${n.sdk.beta?"beta.":""}slive.app/modules/${e}?${Date.now()}&`+i.jsonToUrlParams(i.getUrlVars()),n.sdk.local&&(o.src=`http://localhost:5500/SDK/overlay/module/index.html?${Date.now()}`),o.style.width="100%",o.style.height="100%",o.style.border="none",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.overflow="hidden",o.style.opacity="1",o.style.transition="opacity 0.49s cubic-bezier(.72,.01,.23,.99)",o.style.pointerEvents="none",document.body.appendChild(o),await i.waitMs(500),o.contentWindow.SLIVE.emit("ready",n.sliveConfig)}}},915:e=>{e.exports={listener:[],sliveConfig:{},localConfig:!1,db:[],controller:!1,sdk:{version:!1,url:!1,mode:{dev:!1,server:!1,client:!1},beta:!1},gateway:{overlay:{version:!1,url:!1},dashboard:{version:!1,url:!1}}}},150:(e,o,t)=>{let n=t(915);e.exports=(e,o)=>{if(n.sdk.mode.module||n.sdk.mode.dev){if(!n.listener[e])return;let t=!1;if("toolData"==e&&o.toolId&&o.toolId!=n.localConfig.id)return;if("toolData"==e&&o.toolId&&o.toolId==n.localConfig.id)o=o.payload;else{if("eventData"==e&&o.eventId&&o.eventId!=n.localConfig.id)return;"eventData"==e&&o.eventId&&o.eventId==n.localConfig.id?(t=o.key,o=o.payload):"ready"==e&&(n.sliveConfig=o)}n.listener[e].forEach((e=>e(o,t)))}else if(n.sdk.mode.server)for(const t of document.body.children)"IFRAME"==t.tagName&&t.contentWindow.SLIVE.emit(e,o)}},886:(e,o,t)=>{let n=t(915);e.exports=(e,o)=>{n.listener[e]||(n.listener[e]=[]),n.listener[e].push(o)}},684:(e,o,t)=>{const n=t(524),i=t(915),a=t(986);e.exports=()=>{n.show(),i.controller&&a.start()}},385:(e,o,t)=>{const n=t(524),i=t(915),a=t(127);e.exports={dev:()=>{console.warn(`[sliveApp] SDK v${i.sdk.version} - Local Dev Mode`),i.sdk.mode.dev=!0,a.start()},server:()=>{console.warn(`[sliveApp] SDK v${i.sdk.version} - Server Mode`),i.sdk.mode.server=!0,document.SLIVESERVER=!0,n.show(),a.start()},module:()=>{window!=window.top?(console.warn(`[sliveApp] SDK v${i.sdk.version} - Module Mode`),i.sdk.mode.module=!0):document.location.href=`https://${i.sdk.beta?"beta.":""}slive.app`}}},339:(e,o,t)=>{t(915),e.exports={IsJsonString:e=>{try{JSON.parse(e)}catch(e){return!1}return!0},rdmNum:(e,o)=>Math.floor(Math.random()*(o-e+1)+e),rdmStr:e=>{for(var o="",t=0;t<e;t++)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return o},rdmStrNum:e=>{for(var o="",t=0;t<e;t++)o+=t%2==0?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random())):Math.floor(9*Math.random());return o},discord:e=>{let o=e.guild;o.name=o.name.replace("Bot","App")},generateToken:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)})),getUrlVars:()=>{var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(o,t,n){e[t.toLowerCase()]=n})),e},waitMs:e=>new Promise((o=>setTimeout(o,e))),generateColor:()=>{for(var e="#",o=0;o<6;o++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},jsonToUrlParams:e=>Object.keys(e).map((o=>encodeURIComponent(o)+"="+encodeURIComponent(e[o]))).filter((e=>!e.startsWith("token"))).join("&")}},989:(e,o,t)=>{const n=t(339),i=t(915),a=t(524),s=t(385);if(i.sdk.beta=!0,i.sdk.version=1,i.gateway.overlay.version=1,i.gateway.overlay.url="wss://ws.slive.app/"+(i.sdk.beta?"beta":""),i.gateway.dashboard.version=1,i.gateway.dashboard.url="wss://ws.slive.app/"+(i.sdk.beta?"beta":""),a.set(),a.update(),window.location.hostname.includes(i.sdk.beta?"beta.slive.app":"slive.app")||i.sdk.local?!window.parent.document.SLIVESERVER&&window.location.pathname.includes("/overlay")?s.server():(window.parent.document.SLIVESERVER||window.location.pathname.includes("/module"))&&s.module():s.dev(),(null==n.getUrlVars().token||null==n.getUrlVars().token)&&i.sdk.mode.dev){const e=prompt("[SDK] Bitte gib deinen Token ein");window.location.href=window.location.href+"?token="+e,null==e&&a.error("No Token provided. Exiting...")}const r={on:t(886),emit:i.sdk.mode.module?t(150):null,db:{set:t(499),get:t(365)},live:{events:t(62),stream:t(143)},config:{get:t(221),set:t(874)},controller:{set:t(285),update:t(907)},twitch:{api:{get:t(469)}},utils:t(339),ready:t(684)};e.exports=r}},o={},t=function t(n){var i=o[n];if(void 0!==i)return i.exports;var a=o[n]={exports:{}};return e[n](a,a.exports,t),a.exports}(989);SLIVE=t})();