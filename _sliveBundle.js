var SLIVE;(()=>{var e={221:(e,o,t)=>{const n=t(915);e.exports={get:()=>n.config}},874:(e,o,t)=>{e.exports=e=>{const o=t(915);return o.localConfig?(o.localConfig.width=e.width,o.localConfig.height=e.height):o.localConfig=e,e.width&&(document.body.style.width=o.localConfig.width+"px"),e.height&&(document.body.style.height=o.localConfig.height+"px"),e}},986:(e,o,t)=>{const n=t(339),r=(t(150),t(915)),i=t(269),s={start:async()=>s.connect(!0),O:null,firstConfig:!0,BackendServerWasConnected:!1,connect:async function(e){if(e||s.BackendServerWasConnected){if(!r.gateway.dashboard.version)return console.error("[sliveApp] No Gateway Version specified"),void bodyInjector.error("No version specified. Exiting...");s.O=new WebSocket(`${r.gateway.dashboard.url}?version=${r.gateway.dashboard.version}&token=${r.sliveConfig.api.token}&origin=overlay`),s.O.onmessage=async function(e){switch("ERROR"!=(e=JSON.parse(e.data)).ID&&r.sdk.local&&console.log(e),e.ID){case"ERROR":console.error("[sliveApp] "+JSON.stringify(e));break;case"PB2AF_PING":s.O.send(JSON.stringify({ID:"AF2PB_PONG",DATA:{}}));break;case"PB2AF_AUTHORIZE_SUCCESS":s.BackendServerWasConnected=!0;break;case"PB2AF_CONFIG":console.info(`[sliveApp] [PB] Connection to Gateway v${r.gateway.dashboard.version} established`),s.O.send(JSON.stringify({ID:"OF2PB_CONTROLLER_UPDATE",DATA:r.controller}));break;case"PB2OF_CONTROLLER_EVENT":i(e.DATA)}},s.O.onerror=function(e){console.error("[sliveApp] "+JSON.stringify(e)),s.O.close()},s.O.onclose=async function(){console.error("[sliveApp] Gateway Connection closed"),await n.waitMs(5e3),s.connect(!1)}}}};e.exports=s},127:(e,o,t)=>{const n=t(339),r=t(150),i=t(915),s=t(524),a={start:async()=>a.connect(!0),O:null,firstConfig:!0,BackendServerWasConnected:!1,connect:async function(e){if(e||a.BackendServerWasConnected){if(!i.gateway.overlay.version)return console.error("[sliveApp] No Gateway Version specified"),void s.error("No version specified. Exiting...");a.O=new WebSocket(`${i.gateway.overlay.url}?version=${i.gateway.overlay.version}&token=${n.getUrlVars().token}`),a.O.onmessage=async function(e){switch("ERROR"!=(e=JSON.parse(e.data)).ID&&i.sdk.local&&console.log(e),e.ID){case"ERROR":console.error("[sliveApp] "+e);break;case"OB2OF_PING":a.O.send(JSON.stringify({ID:"OF2OB_PONG",DATA:{}}));break;case"OB2OF_AUTHORIZE_SUCCESS":a.BackendServerWasConnected=!0;break;case"OB2OF_CONFIG":if(i.sliveConfig=e.DATA,a.firstConfig){if(a.firstConfig=!1,r("ready",i.sliveConfig),i.sdk.mode.server)if(i.sliveConfig.overlay.selectedId)s.loadModule(i.sliveConfig.overlay.selectedId);else for(const e of i.sliveConfig.overlay.selectedIds)s.loadModule(e);console.info(`[sliveApp] [OB] Connection to Gateway v${i.gateway.overlay.version} established`),await n.waitMs(2e3),!i.localConfig&&i.sdk.mode.dev&&(alert("[SDK] You have not specified a config for your project. The connection is now closed."),a.BackendServerWasConnected=!1,a.O.close(),s.error("No config specified. Exiting..."))}break;case"OB2OF_EVENTSUB":r("event",e.DATA),r(e.DATA.subscription.type,e.DATA);break;case"OB2OF_CHAT":r("chat",e.DATA);break;case"OB2OF_TOOL_DATA":r("toolData",e.DATA);break;case"OB2OF_DB_GET_RESPONSE":case"OB2OF_DB_SET_RESPONSE":i.db[e.DATA.nonce]=e.DATA}},a.O.onerror=function(e){console.error("[sliveApp] "+JSON.stringify(e)),a.O.close()},a.O.onclose=async function(){console.error("[sliveApp] Gateway Connection closed"),await n.waitMs(5e3),a.connect(!1)}}}};e.exports=a},285:(e,o,t)=>{const n=t(915),r=t(339),i=t(986);e.exports=e=>{for(let o in e){let t=e[o];t.id=r.rdmStrNum(10);for(let e of t.interactions)e.id=r.rdmStrNum(15)}n.controller?(n.controller=e,i.O.send(JSON.stringify({ID:"OF2PB_CONTROLLER_UPDATE",DATA:n.controller}))):(n.controller=e,i.start())}},269:(e,o,t)=>{const n=t(915);e.exports=e=>{let o;for(let t in n.controller){let r=n.controller[t];for(let t of r.interactions)if(t.id==e.id){o=t;break}}o.callback(e.value)}},365:(e,o,t)=>{t(127),t(339);const n=t(915);e.exports=e=>new Promise((async(o,t)=>{const r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.sliveConfig.api.token}};fetch(`${n.sliveConfig.api.host}/me/database?id=${n.localConfig.id}&key=${e}`,r).then((e=>e.json())).then((e=>{o(e.data.value)})).catch((e=>t(e)))}))},499:(e,o,t)=>{const n=t(915);e.exports=(e,o)=>new Promise((async(t,r)=>{const i={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.sliveConfig.api.token},body:JSON.stringify({id:n.localConfig.id,key:e,value:o})};fetch(`${n.sliveConfig.api.host}/me/database`,i).then((e=>e.json())).then((e=>{t(e.data.value)})).catch((e=>r(e)))}))},524:(e,o,t)=>{const n=t(915),r=t(339),i=t(874);e.exports={set:()=>{document.body.style.width="500px",document.body.style.height="200px",document.body.style.transform="scale(1)",document.body.style.transformOrigin="0 0",document.body.style.overflow="hidden",document.body.style.position="absolute",document.body.style.top="0",document.body.style.left="0",document.body.style.transition="transform 0.49s cubic-bezier(.72,.01,.23,.99); opacity 0.49s cubic-bezier(.72,.01,.23,.99)",document.body.style.margin="0",document.body.style.opacity="0"},update:()=>{setInterval((()=>{if(n.sdk.mode.server)if(n.localConfig)for(let e of document.body.children){if("IFRAME"!=e.tagName)continue;let o={};e.contentWindow.document.body.offsetWidth>n.localConfig.width&&(o.width=e.contentWindow.document.body.offsetWidth),e.contentWindow.document.body.offsetHeight>n.localConfig.height&&(o.height=e.contentWindow.document.body.offsetHeight),(o.width||o.height)&&i(o)}else i({width:1920,height:1080});if(!n.localConfig)return;let e=null;if(n.localConfig.width>=n.localConfig.height)e=window.innerWidth/n.localConfig.width;else{if(!(n.localConfig.height>n.localConfig.width))return;e=window.innerHeight/n.localConfig.height}document.body.style.transition="transform 0.49s cubic-bezier(.72,.01,.23,.99)",document.body.style.transform=`scale(${e.toString()})`}),500)},error:e=>{document.body.innerHTML=`<div style="position: absolute; top: 5%; left: 3%; width: 90%; color: #759aff; font-family: Arial; font-size: 30px; text-align: left;">${e}</div>`},show:()=>{document.body.style.opacity="1"},hide:()=>{document.body.style.opacity="0"},loadModule:async e=>{let o=document.createElement("iframe");o.src=`https://${n.sdk.beta?"beta.":""}slive.app/modules/${e}?${Date.now()}`,n.sdk.local&&(o.src="http://127.0.0.1:5500/SDK/overlay/module/index.html"),o.style.width="100%",o.style.height="100%",o.style.border="none",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.overflow="hidden",o.style.opacity="1",o.style.transition="opacity 0.49s cubic-bezier(.72,.01,.23,.99)",o.style.pointerEvents="none",document.body.appendChild(o),await r.waitMs(500),o.contentWindow.SLIVE.emit("ready",n.sliveConfig)}}},915:e=>{e.exports={listener:[],sliveConfig:{},localConfig:!1,db:[],controller:!1,sdk:{version:!1,url:!1,mode:{dev:!1,server:!1,client:!1},beta:!1},gateway:{overlay:{version:!1,url:!1},dashboard:{version:!1,url:!1}}}},150:(e,o,t)=>{let n=t(915);e.exports=(e,o)=>{if(n.sdk.mode.module||n.sdk.mode.dev){if(!n.listener[e])return;if("toolData"==e&&o.toolId&&o.toolId!=n.localConfig.id)return;"toolData"==e&&o.toolId&&o.toolId==n.localConfig.id?o=o.payload:"ready"==e&&(n.sliveConfig=o),n.listener[e].forEach((e=>e(o)))}else if(n.sdk.mode.server)for(const t of document.body.children)"IFRAME"==t.tagName&&t.contentWindow.SLIVE.emit(e,o)}},886:(e,o,t)=>{let n=t(915);e.exports=(e,o)=>{n.listener[e]||(n.listener[e]=[]),n.listener[e].push(o)}},684:(e,o,t)=>{const n=t(524);e.exports=()=>{n.show()}},385:(e,o,t)=>{const n=t(524),r=t(915),i=t(127);e.exports={dev:()=>{console.warn(`[sliveApp] SDK v${r.sdk.version} - Local Dev Mode`),r.sdk.mode.dev=!0,i.start()},server:()=>{console.warn(`[sliveApp] SDK v${r.sdk.version} - Server Mode`),r.sdk.mode.server=!0,document.SLIVESERVER=!0,n.show(),i.start()},module:()=>{window!=window.top?(console.warn(`[sliveApp] SDK v${r.sdk.version} - Module Mode`),r.sdk.mode.module=!0):document.location.href=`https://${r.sdk.beta?"beta.":""}slive.app`}}},339:(e,o,t)=>{t(915),e.exports={IsJsonString:e=>{try{JSON.parse(e)}catch(e){return!1}return!0},rdmNum:(e,o)=>Math.floor(Math.random()*(o-e+1)+e),rdmStr:e=>{for(var o="",t=0;t<e;t++)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return o},rdmStrNum:e=>{for(var o="",t=0;t<e;t++)o+=t%2==0?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random())):Math.floor(9*Math.random());return o},discord:e=>{let o=e.guild;o.name=o.name.replace("Bot","App")},generateToken:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)})),getUrlVars:()=>{var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(o,t,n){e[t.toLowerCase()]=n})),e},waitMs:e=>new Promise((o=>setTimeout(o,e))),generateColor:()=>{for(var e="#",o=0;o<6;o++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}}},989:(e,o,t)=>{const n=t(339),r=t(915),i=t(524),s=t(385);if(r.sdk.beta=!0,r.sdk.version=1,r.gateway.overlay.version=1,r.gateway.overlay.url="wss://ws.slive.app/slive_app_backend_overlay"+(r.sdk.beta?"_beta":""),r.gateway.dashboard.version=1,r.gateway.dashboard.url="wss://ws.slive.app/slive_app_backend_panel"+(r.sdk.beta?"_beta":""),i.set(),i.update(),window.location.hostname.includes(r.sdk.beta?"beta.slive.app":"slive.app")||r.sdk.local?!window.parent.document.SLIVESERVER&&window.location.pathname.includes("/overlay")?s.server():(window.parent.document.SLIVESERVER||window.location.pathname.includes("/module"))&&s.module():s.dev(),(null==n.getUrlVars().token||null==n.getUrlVars().token)&&r.sdk.mode.dev){const e=prompt("[SDK] Bitte gib deinen Token ein");window.location.href=window.location.href+"?token="+e,null==e&&i.error("No Token provided. Exiting...")}const a={on:t(886),emit:r.sdk.mode.module?t(150):null,db:{set:t(499),get:t(365)},config:{get:t(221),set:t(874)},controller:{set:t(285)},utils:t(339),ready:t(684)};e.exports=a}},o={},t=function t(n){var r=o[n];if(void 0!==r)return r.exports;var i=o[n]={exports:{}};return e[n](i,i.exports,t),i.exports}(989);SLIVE=t})();