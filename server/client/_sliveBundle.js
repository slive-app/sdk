var SLIVE;(()=>{var e={221:(e,o,t)=>{const n=t(915);e.exports={get:()=>n.config}},874:(e,o,t)=>{e.exports=e=>{const o=t(915);return o.localConfig?(o.localConfig.width=e.width,o.localConfig.height=e.height):o.localConfig=e,e.width&&(document.body.style.width=o.localConfig.width+"px"),e.height&&(document.body.style.height=o.localConfig.height+"px"),e}},479:(e,o,t)=>{console.log=function(){};const n=t(339),i=t(150),s=t(915),r=t(524),a={start:async()=>a.connect(!0),O:null,firstConfig:!0,BackendServerWasConnected:!1,connect:async function(e){if(e||a.BackendServerWasConnected){if(!s.gateway.version)return console.error("[sliveApp] No Gateway Version specified"),void r.error("No version specified. Exiting...");a.O=new WebSocket(`${s.gateway.url}?version=${s.gateway.version}&token=${n.getUrlVars().token}`),a.O.onmessage=async function(e){switch("ERROR"!=(e=JSON.parse(e.data)).ID&&console.log(e),e.ID){case"ERROR":console.error("[sliveApp] "+e);break;case"OB2OF_PING":a.O.send(JSON.stringify({ID:"OF2OB_PONG",DATA:{}}));break;case"OB2OF_AUTHORIZE_SUCCESS":a.BackendServerWasConnected=!0;break;case"OB2OF_CONFIG":if(s.sliveConfig=e.DATA,a.firstConfig){if(a.firstConfig=!1,i("ready",e.DATA),s.sdk.mode.server)if(s.sliveConfig.overlay.selectedId)r.loadModule(s.sliveConfig.overlay.selectedId);else for(const e of s.sliveConfig.overlay.selectedIds)r.loadModule(e);console.info(`[sliveApp] Connection to Gateway v${s.gateway.version} established`),await n.waitMs(2e3),!s.localConfig&&s.sdk.mode.dev&&(alert("[SDK] You have not specified a config for your project. The connection is now closed."),a.BackendServerWasConnected=!1,a.O.close(),r.error("No config specified. Exiting..."))}break;case"OB2OF_EVENTSUB":i("event",e.DATA),i(e.DATA.subscription.type,e.DATA);break;case"OB2OF_CHAT":i("chat",e.DATA);break;case"OB2OF_TOOL_DATA":i("toolData",e.DATA);break;case"OB2OF_DB_GET_RESPONSE":case"OB2OF_DB_SET_RESPONSE":s.db[e.DATA.nonce]=e.DATA}},a.O.onerror=function(e){console.error("[sliveApp] "+JSON.stringify(e)),a.O.close()},a.O.onclose=async function(){console.error("[sliveApp] Gateway Connection closed"),await n.waitMs(5e3),a.connect(!1)}}}};e.exports=a},365:(e,o,t)=>{const n=t(479),i=t(339),s=t(915);e.exports=(e,o)=>new Promise((async(o,t)=>{const r=i.rdmStrNum(16);for(n.O.send(JSON.stringify({ID:"OF2OB_DB_GET",DATA:{key:e,nonce:r}}));null==s.db[r];)await i.waitMs(1);let a=await s.db[r];delete s.db[r],a.success?o(a.value):t("Error while getting value")}))},499:(e,o,t)=>{const n=t(479),i=t(339),s=t(915);e.exports=(e,o)=>new Promise((async(t,r)=>{const a=i.rdmStrNum(16);for(n.O.send(JSON.stringify({ID:"OF2OB_DB_SET",DATA:{key:e,value:o,nonce:a}}));null==s.db[a];)await i.waitMs(1);let d=await s.db[a];delete s.db[a],delete d.nonce,d.success?t():r("Error while setting value")}))},524:(e,o,t)=>{const n=t(915),i=t(339),s=t(874);e.exports={set:()=>{document.body.style.width="500px",document.body.style.height="200px",document.body.style.transform="scale(1)",document.body.style.transformOrigin="0 0",document.body.style.overflow="hidden",document.body.style.position="absolute",document.body.style.top="0",document.body.style.left="0",document.body.style.transition="transform 0.49s cubic-bezier(.72,.01,.23,.99); opacity 0.49s cubic-bezier(.72,.01,.23,.99)",document.body.style.margin="0",document.body.style.opacity="0"},update:()=>{setInterval((()=>{if(n.sdk.mode.server)if(n.localConfig)for(let e of document.body.children){if("IFRAME"!=e.tagName)continue;let o={};e.contentWindow.document.body.offsetWidth>n.localConfig.width&&(o.width=e.contentWindow.document.body.offsetWidth),e.contentWindow.document.body.offsetHeight>n.localConfig.height&&(o.height=e.contentWindow.document.body.offsetHeight),(o.width||o.height)&&s(o)}else s({width:1920,height:1080});if(!n.localConfig)return;let e=null;if(n.localConfig.width>=n.localConfig.height)e=window.innerWidth/n.localConfig.width;else{if(!(n.localConfig.height>n.localConfig.width))return;e=window.innerHeight/n.localConfig.height}document.body.style.transition="transform 0.49s cubic-bezier(.72,.01,.23,.99)",document.body.style.transform=`scale(${e.toString()})`}),500)},error:e=>{document.body.innerHTML=`<div style="position: absolute; top: 5%; left: 3%; width: 90%; color: #759aff; font-family: Arial; font-size: 30px; text-align: left;">${e}</div>`},show:()=>{document.body.style.opacity="1"},hide:()=>{document.body.style.opacity="0"},loadModule:async e=>{let o=document.createElement("iframe");o.src=`https://${n.sdk.beta?"beta.":""}slive.app/modules/${e}`,o.style.width="100%",o.style.height="100%",o.style.border="none",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.overflow="hidden",o.style.opacity="1",o.style.transition="opacity 0.49s cubic-bezier(.72,.01,.23,.99)",o.style.pointerEvents="none",document.body.appendChild(o),await i.waitMs(500),o.contentWindow.SLIVE.emit("ready",n.sliveConfig)}}},915:e=>{e.exports={listener:[],sliveConfig:{},localConfig:!1,db:[],sdk:{version:!1,url:!1,mode:{dev:!1,server:!1,client:!1},beta:!1},gateway:{url:!1,version:!1}}},150:(e,o,t)=>{let n=t(915);e.exports=(e,o)=>{if(n.sdk.mode.module||n.sdk.mode.dev){if(!n.listener[e])return;if("toolData"==e&&o.toolId&&o.toolId!=n.localConfig.id)return;o=o.payload,n.listener[e].forEach((e=>e(o)))}else if(n.sdk.mode.server)for(const t of document.body.children)"IFRAME"==t.tagName&&t.contentWindow.SLIVE.emit(e,o)}},886:(e,o,t)=>{let n=t(915);e.exports=(e,o)=>{n.listener[e]||(n.listener[e]=[]),n.listener[e].push(o)}},684:(e,o,t)=>{const n=t(524);e.exports=()=>{n.show()}},385:(e,o,t)=>{const n=t(524),i=t(915),s=t(479);e.exports={dev:()=>{console.warn(`[sliveApp] SDK v${i.sdk.version} - Local Dev Mode`),i.sdk.mode.dev=!0,s.start()},server:()=>{console.warn(`[sliveApp] SDK v${i.sdk.version} - Server Mode`),i.sdk.mode.server=!0,document.SLIVESERVER=!0,n.show(),s.start()},module:()=>{window!=window.top?(console.warn(`[sliveApp] SDK v${i.sdk.version} - Module Mode`),i.sdk.mode.module=!0):document.location.href=`https://${i.sdk.beta?"beta.":""}slive.app`}}},339:(e,o,t)=>{t(915),e.exports={IsJsonString:e=>{try{JSON.parse(e)}catch(e){return!1}return!0},rdmNum:(e,o)=>Math.floor(Math.random()*(o-e+1)+e),rdmStr:e=>{for(var o="",t=0;t<e;t++)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return o},rdmStrNum:e=>{for(var o="",t=0;t<e;t++)o+=t%2==0?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random())):Math.floor(9*Math.random());return o},generateToken:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)})),getUrlVars:()=>{var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(o,t,n){e[t.toLowerCase()]=n})),e},waitMs:e=>new Promise((o=>setTimeout(o,e))),generateColor:()=>{for(var e="#",o=0;o<6;o++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}}},989:(e,o,t)=>{const n=t(339),i=t(915),s=t(524),r=t(385);if(i.sdk.beta=!0,i.sdk.version=1,i.gateway.version=1,i.gateway.url="wss://ws.slive.app/slive_app_backend_overlay"+(i.sdk.beta?"_beta":""),s.set(),s.update(),window.location.hostname.includes(i.sdk.beta?"beta.slive.app":"slive.app")?!window.parent.document.SLIVESERVER&&window.location.pathname.includes("/overlay")?r.server():(window.parent.document.SLIVESERVER||window.location.pathname.includes("/module"))&&r.module():r.dev(),null==n.getUrlVars().token&&i.sdk.mode.dev){const e=prompt("[SDK] Bitte gib deinen Token ein");window.location.href=window.location.href+"?token="+e,null==e&&s.error("No Token provided. Exiting...")}const a={on:t(886),emit:i.sdk.mode.module?t(150):null,db:{set:t(499),get:t(365)},config:{get:t(221),set:t(874)},utils:t(339),ready:t(684)};e.exports=a}},o={},t=function t(n){var i=o[n];if(void 0!==i)return i.exports;var s=o[n]={exports:{}};return e[n](s,s.exports,t),s.exports}(989);SLIVE=t})();